<!DOCTYPE html>
<html>
<head>
  	<meta charset="utf-8" />
  	<title>Idayari</title>
  	<link rel="icon" href="/img/favicon.ico" type="image/x-icon">
  	<link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/css/main.css" rel="stylesheet">
	<link href="/css/index.css" rel="stylesheet">
    <script src="/js/modifRDV.js"></script>
</head>

<body class="container flex-column d-flex min-vh-100 min-vw-100 m-0 p-0" data-bs-theme="light">
<% if (locals.user) { %>
    <!-- File for header -->
    <%- await include('partials/header.ejs') %>

	<div class="p-3 d-lg-none">
		<a class="btn btn-primary text-white" data-bs-toggle="offcanvas" href="#offcanvas" role="button" aria-controls="offcanvas">
			liste agendas
		  </a>
	</div>
	  
	<div class="offcanvas offcanvas-start d-lg-none" tabindex="-1" id="offcanvas" aria-labelledby="offcanvasLabel">
		<div class="offcanvas-header">	
		  <h5 class="offcanvas-title" id="offcanvasLabel">Liste de mes agendas</h5>
		  <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
		</div>
		<div class="offcanvas-body d-flex">
			<nav class="col nav flex-grow-1 p-0 text-break bg-light">
				<div class="w-100 h-fit-content">
					<div class="nav-link text-secondary px-3 py-2 d-flex justify-content-between align-items-center"><span>Vos agendas </span>
								  <button onclick="window.location.href='/modifierAgendas'" class="btn btn-sm btn-secondary text-white">Modifier</button>
					</div>
					<ul class="list-group px-3 py-1">
						<li id="selectAlloffcanvas" class="list-group-item list-group-item-light user-select-none" onclick="toggleAll('agendaListoffcanvas', 'selectAlloffcanvas')">Tout sélectionner</li>
					</ul>
					<ul id="agendaListoffcanvas" class="list-group px-3">
						<% for (const agenda of locals.agendas) { %>
							<li class="list-group-item list-group-item-light user-select-none" id="agenda_<%= agenda.nom %>offcanvas" onclick='toggleAgenda("agenda_<%= encodeURI(agenda.nom) %>offcanvas")'><%= agenda.nom %></li>
						<% } %>
					</ul>
					<div class="w-100 d-flex h-fit-content p-3">
						<button class="btn btn-outline-secondary w-100" id="ouvreDialogCreationAgendaoffcanvas" onclick="openDialog()">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-plus" viewBox="0 0 16 16">
								<path d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7"/>
								<path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
							</svg>
						</button>
					</div>
				</div>
				<div class="w-100 d-flex h-fit-content align-self-end p-3">
					<button onclick="window.location.href='/deconnexion'" class="btn btn-outline-danger bg-danger-border-subtle w-100">Se déconnecter</button>
				</div>
			</nav>
		</div>
	  </div>


    <div class="row min-vw-100 p-0 m-0 h-100 flex-grow-1">
		<nav class="col nav flex-grow-1 p-0 text-break bg-light d-none d-lg-flex col-2">
			<div class="w-100 h-fit-content">
				<div class="nav-link text-secondary px-3 py-2 d-flex justify-content-between align-items-center"><span>Vos agendas </span>
							  <button onclick="window.location.href='/modifierAgendas'" class="btn btn-sm btn-secondary text-white">Modifier</button>
				</div>
				<ul class="list-group px-3 py-1">
					<li id="selectAll" class="list-group-item list-group-item-light user-select-none" onclick="toggleAll('agendaList', 'selectAll')">Tout sélectionner</li>
				</ul>
				<ul id="agendaList" class="list-group px-3">
					<% for (const agenda of locals.agendas) { %>
						<li class="list-group-item list-group-item-light user-select-none" id="agenda_<%= agenda.nom %>" onclick='toggleAgenda("agenda_<%= encodeURI(agenda.nom) %>")'><%= agenda.nom %></li>
					<% } %>
				</ul>
				<div class="w-100 d-flex h-fit-content p-3">
					<button class="btn btn-outline-secondary w-100" id="ouvreDialogCreationAgenda" onclick="openDialog()">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-plus" viewBox="0 0 16 16">
							<path d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7"/>
							<path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
						</svg>
					</button>
				</div>
			</div>
			<div class="w-100 d-flex h-fit-content align-self-end p-3">
				<button onclick="window.location.href='/deconnexion'" class="btn btn-outline-danger bg-danger-border-subtle w-100">Se déconnecter</button>
			</div>
		</nav>
        <div class="col col-10 d-flex flex-column">
            <div class="row d-flex flex-grow-1">
                <% if (locals.agendas) { %>
                <ul>
                    <% for (const agenda of locals.agendas) { %>
                        <li>
                            <ul>
                                <% const rendezVous = await agenda.getRendezVous(); %>
                                <% for (const rv of rendezVous) {
                                    //Conversion des dates dans un format lisible
                                    const dateDeb = new Date(rv.dateDebut);
                                    const deb = dateDeb.toLocaleDateString('fr-FR', {
                                        year: 'numeric',
                                        month: 'long',
                                        day: 'numeric',
                                        hour: '2-digit',
                                        minute: '2-digit'
                                    });
                                    const dateFin = new Date(rv.dateFin);
                                    const fin = dateFin.toLocaleDateString('fr-FR', {
                                        year: 'numeric',
                                        month: 'long',
                                        day: 'numeric',
                                        hour: '2-digit',
                                        minute: '2-digit'
                                    });
                                %>

                                %>
                                <li data-titre="<%= rv.titre %>"
							                      data-lieu="<%= rv.lieu %>"
							                      data-description="<%= rv.description %>"
							                      data-date-debut="<%= rv.dateDebut.toISOString() %>"
							                      data-date-fin="<%= rv.dateFin.toISOString() %>"
							                      data-id="<%= rv.id %>"

							                      onClick="creerModale(this)">
                                    <%= rv.titre %> | Du <%= deb %> au <%= fin %>
                                    <% if (rv.lieu && rv.lieu.trim() !== "") { %>
                                        | à : <%= rv.lieu %>
                                    <% } %>
                                    <% if (rv.description && rv.description.trim() !== "") { %>
                                        | description : <%= rv.description%>
                                    <% } %>
                                </li>

                                <% } %>
                            </ul>
                        </li>
                    <% } %>
                </ul>
                <% } %>
            </div>
            <div class="d-flex justify-content-end px-3">
                <button onclick="window.location.href='/rendezVous/new'" class="btn btn-outline-secondary px-3 py-2 text-center w-fit-content">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cake" viewBox="0 0 16 16">
                        <path d="m7.994.013-.595.79a.747.747 0 0 0 .101 1.01V4H5a2 2 0 0 0-2 2v3H2a2 2 0 0 0-2 2v4a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-4a2 2 0 0 0-2-2h-1V6a2 2 0 0 0-2-2H8.5V1.806A.747.747 0 0 0 8.592.802zM4 6a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v.414a.9.9 0 0 1-.646-.268 1.914 1.914 0 0 0-2.708 0 .914.914 0 0 1-1.292 0 1.914 1.914 0 0 0-2.708 0A.9.9 0 0 1 4 6.414zm0 1.414c.49 0 .98-.187 1.354-.56a.914.914 0 0 1 1.292 0c.748.747 1.96.747 2.708 0a.914.914 0 0 1 1.292 0c.374.373.864.56 1.354.56V9H4zM1 11a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v.793l-.354.354a.914.914 0 0 1-1.293 0 1.914 1.914 0 0 0-2.707 0 .914.914 0 0 1-1.292 0 1.914 1.914 0 0 0-2.708 0 .914.914 0 0 1-1.292 0 1.914 1.914 0 0 0-2.708 0 .914.914 0 0 1-1.292 0L1 11.793zm11.646 1.854a1.915 1.915 0 0 0 2.354.279V15H1v-1.867c.737.452 1.715.36 2.354-.28a.914.914 0 0 1 1.292 0c.748.748 1.96.748 2.708 0a.914.914 0 0 1 1.292 0c.748.748 1.96.748 2.707 0a.914.914 0 0 1 1.293 0Z"/>
                    </svg>
                </button></div>

        </div>
    </div>
	<%- await include('viewDialogCreationAgenda.ejs') %>
		<script src="/js/dialogCreationAgenda.js"></script>
    <%} else{ %>
      	<div class="container-fluid bg-background-color">
        	<div class="row">
          		<nav class="navbar">
            		<div class="container-fluid">
              			<div>
                			<img src="/img/favicon.ico" alt="icon" class="s-32" loading="lazy">
                			<a class="navbar-brand text-black">Idayari</a>
              			</div>
              			<div class="d-flex">
                			<a href="/connexion" class="btn btn-primary btn-sm bg-primary me-3 rounded-4 text-white">Se Connecter</a>
                			<a href="/inscription" class="btn btn-secondary btn-sm bg-secondary rounded-4 text-white">S'inscrire</a>
              			</div>
            		</div>
          		</nav>
        	</div>

        	<div class="row">
          		<div class="position-relative text-center">
            
            		<div class="my-8">
              			<h1 class="fs-2 text-primary">Idayari. Une application agenda pour tout le monde</h1>
              			<h2 class="fs-7 text-black">Créer, importer, exporter et partager des agendas. L’unique
                		application dont vous aurez besoin pour gérer votre temps.</h2>
            		</div>
            		<img src="/img/index_1.png" alt="agenda" class="s-x0-8 mb-5" loading="lazy">
            		<h2 class="my-8 fs-3">Quelques fonctionnalités</h2>
            		<div class="row justify-content-evenly align-items-stretch">
              			<div class="card p-4 card-custom">
                			<img src="/img/index_2.svg" class="card-img-top img-fluid" alt="import/export" loading="lazy">
                			<div class="card-body">
                  				<h5 class="card-title">Importer/Exporter</h5>
                  				<p class="card-text">Vous pouvez importer ou exporter un agenda en . json</p>
                			</div>
              			</div>
              			<div class="card p-4 card-custom">
                			<img src="/img/index_3.svg" class="card-img-top img-fluid" alt="share" loading="lazy">
                			<div class="card-body">
                  				<h5 class="card-title">Partager</h5>
                  				<p class="card-text">Vous pouvez partager vos agendas avec vos amis, collègues. </p>
                			</div>
              			</div>
              		<div class="card p-4 card-custom">
                		<img src="/img/index_4.svg" class="card-img-top img-fluid" alt="search" loading="lazy">
                		<div class="card-body">
                  			<h5 class="card-title">Rechercher</h5>
                  			<p class="card-text">Vous pouvez chercher avec des filtres dans vos agendas</p>
                		</div>
              		</div>
            	</div>
          	</div>
        </div>

        <div class="row justify-content-center mb-8 mt-5">
          	<div class="col-12 col-md-9 col-lg-6 mb-8">
            	<div class="accordion" id="accordionExample">
              		<h3 class="text-center mb-8">Questions souvents posés</h3>
              		<div class="accordion-item">
                		<h2 class="accordion-header">
                  			<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                    		aria-expanded="true" aria-controls="collapseOne">Pourquoi devrais-je utiliser Idayari ?
                  			</button>
                		</h2>
                		<div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                  			<div class="accordion-body">
                    			<strong>Idayari</strong> est une application complète pour la gestion de vos agendas. Avec
                    			<strong>Idayari</strong>, vous pouvez
                    			<u>créer</u> et <u>organiser</u> vos agendas en fonction de vos besoins.
                    			Vous avez aussi la
                    			possibilité d'<u>importer</u> et d'<u>exporter</u> vos agendas au format JSON, facilitant
                    			l'intégration avec
                    			d'autres outils. De plus, vous pouvez <u>partager</u> vos agendas avec vos amis ou collègues,
                    			rendant
                    			la collaboration plus fluide. Grâce à sa simplicité et ses fonctionnalités avancées,
                    			<strong>Idayari</strong> est
                    			l'outil idéal pour gérer votre temps efficacement et sans effort.
                  			</div>
                		</div>
              		</div>
              		<div class="accordion-item">
                		<h2 class="accordion-header">
                  			<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    			data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    			Idayari est-il un outils gratuit ?
                  			</button>
                		</h2>
                		<div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                  			<div class="accordion-body">
                    			<strong>Oui, Idayari</strong> est entièrement <strong>gratuit</strong> ! Vous pouvez profiter de
                    			toutes ses fonctionnalités sans
                    			frais, y compris la création, l'importation et l'exportation d'agendas, ainsi que le partage de vos
                    			calendriers avec d'autres utilisateurs. Notre objectif est de fournir une solution accessible à tous
                    			pour gérer facilement leur emploi du temps, que ce soit pour un usage personnel ou professionnel.
                  			</div>
                		</div>
              		</div>
              		<div class="accordion-item">
                		<h2 class="accordion-header">
                  			<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    			data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    			Puis-je accéder à mes agendas depuis plusieurs appareils ?
                  			</button>
                		</h2>
                		<div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                  			<div class="accordion-body">
                    			Oui, avec Idayari, vous pouvez accéder à vos agendas depuis n'importe quel appareil connecté à
                    			Internet. Que vous soyez sur un ordinateur, une tablette ou un smartphone, vos calendriers seront
                    			toujours synchronisés. Cela vous permet de gérer vos événements où que vous soyez, et de partager
                    			vos agendas en temps réel avec vos collègues ou amis.
                  			</div>
                		</div>
              		</div>
            	</div>
          	</div>
        </div>
        <div class="mb-8 text-center">
          	<h2 class="mb-8 fs-3">Commencez dès aujourd'hui</h2>
          	<a type="button" href="/inscription" class="btn btn-primary bg-primary mb-8 text-white">Se lancer</a>
        </div>
    <% } %>
	<script src="/js/index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>
